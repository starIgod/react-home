"use strict";(self.webpackChunkandroid_view=self.webpackChunkandroid_view||[]).push([[563],{2496:function(e,t,n){var i=n(1243).Z.create({baseURL:"http://8.129.190.90:8080",timeout:3e5,method:"GET"});i.interceptors.request.use((function(e){var t=window.localStorage.getItem("token");return void 0!=t&&(e.headers.Authorization=t),e}),(function(e){console.log("\u8bf7\u6c42\u62d2\u7edd\u53d1\u51fa"),Promise.reject(e)})),i.interceptors.response.use((function(e){var t=e.data;if(200===t.status)return t;alert(t.description)})),t.Z=i},2191:function(e,t,n){n.d(t,{Z:function(){return x}});var i={topBarT:"topBar_topBarT__HQZ5T",topBarF:"topBar_topBarF__02dJx",backIcon:"topBar_backIcon__m89+w",topMap:"topBar_topMap__Xjoh+",searInput:"topBar_searInput__gUCRB"},s=n(6864),r=n(1730),a=n(881),o=n(3099),c=n(7548),l=n(8448),d=n(7689),u=(n(2791),n(9434)),h=n(184);function x(e){var t=(0,u.v9)((function(e){return e.commodity})),n=t.label,x=(t.pinyin,t.short,t.value,(0,d.s0)()),p=null;return e.showBack&&(p=(0,h.jsx)("div",{onClick:function(){x(-1)},className:i.backIcon,children:(0,h.jsx)(s.Z,{style:{fontSize:"22px"}})})),(0,h.jsxs)("div",{className:i.topBarT,style:{margin:e.showBack?"0 0":"10px 0"},children:[p,(0,h.jsx)("div",{className:i.searInput,style:{marginLeft:e.showBack?"0px":"25px",backgroundColor:"white"},children:(0,h.jsxs)(o.Z.Compact,{size:"large",children:[(0,h.jsx)(c.Z,{defaultValue:n,open:!1,bordered:!1,onClick:function(){x("/city")}}),(0,h.jsx)(l.Z,{prefix:(0,h.jsx)(r.Z,{style:{fontSize:"18px",color:"#0c0c0c"}}),placeholder:"\u8bf7\u8f93\u5165\u5730\u5740",bordered:!1})]})}),(0,h.jsx)("div",{className:i.topMap,children:(0,h.jsx)(a.Z,{onClick:function(){x("/map")},style:{fontSize:"22px",color:e.showBack?"black":"#fbfbfb"}})})]})}},1015:function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var i=n(3433),s=n(4942),r=n(9439),a=n(2191),o=n(928),c=n(183),l=n(7128),d=n(5635),u={selectBar:"renting_selectBar__Svtyp",selectBox:"renting_selectBox__GJs24",shadeBox:"renting_shadeBox__9eZb6",modal:"renting_modal__TW0h9",scrollableDiv:"renting_scrollableDiv__Nfloz",seleTor:"renting_seleTor__N34BB",selTorBut:"renting_selTorBut__Wyxmf"},h=n(7295),x=n(2791),p=n(2496);var f=n(9434),v=n(4771),j=n(184);function b(){var e=this,t=(0,f.v9)((function(e){return e.commodity})),n=(t.label,t.value),b=[{text:"\u533a\u57df",opType:0,criteria:[{text:"\u533a\u57df",id:"area"},{text:"\u5730\u94c1",id:"subway"}]},{text:"\u65b9\u5f0f",opType:0,criteria:[{text:"",id:"rentType"}]},{text:"\u79df\u91d1",opType:0,criteria:[{text:"",id:"price"}]},{text:"\u7b5b\u9009",opType:1,criteria:[{text:"\u623f\u5c4b\u7c7b\u578b",id:"roomType"},{text:"\u671d\u5411",id:"oriented"},{text:"\u697c\u5c42",id:"floor"},{text:"\u697c\u5c42",id:"characteristic"}]}],m=(0,x.useState)(""),_=(0,r.Z)(m,2),y=_[0],g=_[1],k=x.useState(null),B=(0,r.Z)(k,2),Z=B[0],w=B[1],T=x.useState(!1),C=(0,r.Z)(T,2),S=C[0],I=C[1],N=(0,x.useState)(),z=(0,r.Z)(N,2),M=z[0],D=z[1],E=(0,x.useState)(!1),O=(0,r.Z)(E,2),G=O[0],L=O[1],A=1,F=(0,x.useState)(1),J=(0,r.Z)(F,2),Q=J[0],R=J[1],U=15,W=(0,x.useState)(!1),q=(0,r.Z)(W,2),H=q[0],P=q[1],V=(0,x.useState)([]),X=(0,r.Z)(V,2),K=X[0],Y=X[1],$=null,ee={cityId:n,start:(A-1)*U+1,end:A*U},te=Object.assign({},ee),ne=function(e){A=1,g(e.text),function(e){if(I(!0),void 0==M)w(),I(!1),g("");else switch(e.opType){case 0:var t=e.criteria.map((function(e){return M[e.id]}));1==t.length&&(t=t[0]),w((0,j.jsxs)("div",{className:u.selectBox,children:[(0,j.jsx)("div",{children:(0,j.jsx)(d.IA,{options:t,onChange:function(e){$=null,$=[],$=e},style:{flex:1}})}),(0,j.jsxs)("div",{children:[(0,j.jsx)("button",{onClick:function(){return I(!1)},children:"\u53d6\u6d88"}),(0,j.jsx)("button",{onClick:re.bind(this,e),children:"\u786e\u8ba4"})]})]}));break;case 1:for(var n,i={},s=[],r=0;r<b.length;r++)b[r].text==e.text&&(n=b[r]);n.criteria.forEach((function(e,t){s.push((0,j.jsxs)("div",{className:u.seleTor,children:[(0,j.jsx)("div",{children:e.text}),(0,j.jsx)(d.Qf,{multiple:!0,options:M[e.id],onChange:function(t,n){i[e.id]=[],i[e.id].push(t)}})]},t))})),s.push((0,j.jsxs)("div",{className:u.selTorBut,children:[(0,j.jsx)("button",{onClick:function(){L(!1),w(null)},children:"\u53d6\u6d88"}),(0,j.jsx)("button",{onClick:function(){var e=[];for(var t in i)i[t].forEach((function(t){t.forEach((function(t){e.push(t)}))}));var n=Object.assign({},te);n.start=1,n.end=15,n.more=e.join(","),te=n,ae(),L(!1)},children:"\u786e\u8ba4"})]})),w(s.map((function(e){return e}))),I(!1),L(!0);break;default:w()}}(e)};function ie(){for(var e=$.length;e>=0;e--)if(null!=$[e]&&void 0!=$[e])return"null"==$[e]&&"area"!=$[e-1]&&"subway"!=$[e-1]?$[e-1]:$[e]}function se(e,t){te=Object.assign({},{cityId:n,start:(A-1)*U+1,end:A*U},(0,s.Z)({},e,t)),ae(0)}function re(e){if(A=1,"\u533a\u57df"==e.text)switch($[0]){case"area":se("area",ie());break;case"subway":se("subway",ie())}else{switch(te={cityId:n,start:(A-1)*U+1,end:A*U},e.text){case"\u65b9\u5f0f":te.rentType=null==$?"null":$[0];break;case"\u79df\u91d1":te.price=null==$?"null":$[0].split("|")[1]}Y([]),ae(0)}}function ae(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;I(!1),w(),P(!0),1!=t&&Y([]),(e=te,(0,p.Z)({url:"/houses",params:e})).then((function(e){Y(1==t?[].concat((0,i.Z)(K),(0,i.Z)(e.body.list)):e.body.list),R(e.body.count),P(!1)})).catch((function(e){})),I(!1)}return(0,x.useEffect)((function(){var e;ae(),(e=n,(0,p.Z)({url:"/houses/condition",params:{id:e}})).then((function(e){D(e.body)})).catch((function(e){}))}),[]),(0,j.jsxs)("div",{children:[(0,j.jsx)(a.Z,{showBack:!0}),(0,j.jsx)(o.Z,{children:(0,j.jsxs)("div",{className:u.selectBar,children:[(0,j.jsx)("div",{children:b.map((function(t,n){return(0,j.jsxs)("div",{onClick:ne.bind(e,t),style:{color:y==t.text?"#21b97a":"black"},children:[(0,j.jsx)("span",{children:t.text}),(0,j.jsx)(h.Z,{})]},n)}))}),G?null:Z,(0,j.jsx)(d.GI,{visible:G,onMaskClick:function(){L(!1),w(null)},position:"right",bodyStyle:{width:"60vw"},children:Z}),(0,j.jsx)("div",{className:u.shadeBox,onClick:function(){w(),I(!1),g("")},style:{display:S?"block":"none"}})]})}),(0,j.jsx)("div",{id:"scrollableDiv",className:u.scrollableDiv,style:{height:740,overflow:"auto"},children:(0,j.jsx)(v.Z,{dataLength:K.length,next:function(){H||(A+=1,te=Object.assign({},te,{start:(A-1)*U+1,end:A*U}),ae(1))}.bind(),hasMore:K.length<Q,loader:(0,j.jsx)(c.Z,{avatar:!0,paragraph:{rows:3},active:!0}),endMessage:(0,j.jsx)(l.Z,{plain:!0,children:"\u5df2\u7ecf\u5230\u5e95\u4e86\u54e6~"}),scrollableTarget:"scrollableDiv",children:K.map((function(e,t){return(0,j.jsxs)("div",{children:[(0,j.jsx)("div",{children:(0,j.jsx)("img",{src:"http://8.129.190.90:8080"+e.houseImg})}),(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{children:e.title}),(0,j.jsx)("p",{children:e.desc}),(0,j.jsx)("div",{children:e.tags.map((function(e,t){return(0,j.jsx)("div",{children:e},t)}))}),(0,j.jsxs)("span",{children:[e.price," ",(0,j.jsx)("span",{children:"\u5143/\u6708"})]})]})]},t)}))})})]})}}}]);
//# sourceMappingURL=563.a990f49b.chunk.js.map