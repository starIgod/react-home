{"version":3,"file":"static/js/797.169cbdfd.chunk.js","mappings":"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","sources":["api/home.js","api/server.js","webpack://android-view/./src/view/city/index.module.scss?db22","view/city/index.js"],"sourcesContent":["import server from \"./server\";\r\n\r\nexport function getBanner(){\r\n    return server({\r\n        url:'/home/swiper',\r\n    })\r\n}\r\n\r\nexport function getGroups(){\r\n    return server({\r\n        url:'/home/groups'\r\n    })\r\n}\r\n\r\nexport function getNews(){\r\n    return server({\r\n        url:'/home/news'\r\n    })\r\n}\r\n\r\nexport function getCitys(){\r\n    return server({\r\n        url:'/area/city',\r\n        params:{\r\n            level:1,\r\n        }\r\n    })\r\n}\r\n\r\nexport function getHot(){\r\n    return server({\r\n        url:'/area/hot',\r\n    })\r\n}","import axios from \"axios\";\r\n\r\nconst service = axios.create({\r\n    baseURL:'http://8.129.190.90:8080',\r\n    timeout:60 * 5 * 1000,\r\n    method:'GET',\r\n})\r\n\r\nservice.interceptors.request.use(request=>{\r\n    // console.log(\"请求发出前\",request)\r\n    let token = window.localStorage.getItem('token')\r\n    if (token != undefined){\r\n        request.headers['Authorization'] = token\r\n    }\r\n    return request //最后要返回\r\n},error=>{\r\n    console.log(\"请求拒绝发出\")\r\n    Promise.reject(error) //有错误，则调用catch方法\r\n})\r\n\r\nservice.interceptors.response.use(response=>{\r\n    // console.log(\"请求接收后\",response)\r\n    let data = response.data;\r\n    // console.log(\"data\",data)\r\n    //获取自定义的status\r\n    if (data.status === 200){ //自己的业务的成功状态码为0\r\n        return data\r\n    }else {\r\n        alert(data.description)\r\n    }\r\n})\r\n\r\nexport default service","// extracted by mini-css-extract-plugin\nexport default {\"top\":\"city_top__ZZfT2\",\"info\":\"city_info__DfEu3\",\"ant-anchor-link-active\":\"city_ant-anchor-link-active__Cxss-\"};","import sassCity from './index.module.scss'\r\nimport {getCitys,getHot} from '../../api/home'\r\nimport React,{useEffect} from 'react'\r\nimport {LeftOutlined} from '@ant-design/icons'\r\nimport {useNavigate} from 'react-router-dom'\r\nimport { Anchor, Col, Row } from 'antd';\r\nimport {useSelector,useDispatch} from \"react-redux\";\r\nimport city, { updateCity } from '../../store/city'\r\n\r\nexport default function City(props){\r\n    const {label,pinyin,short,value} = useSelector((state)=>state.commodity)\r\n    const navigate =  useNavigate()\r\n    const dispacth = useDispatch()\r\n    let [areas,setAreas] = React.useState([])\r\n    let [hots,setHots] = React.useState([])\r\n    let citys = {}\r\n    let Anchors = []\r\n    useEffect(()=>{\r\n        getCitys().then(res=>{\r\n            setAreas(res.body)\r\n        })\r\n        getHot().then(res=>{\r\n            setHots(res.body)\r\n        })\r\n    },[])\r\n    function toBack(){\r\n        navigate(-1)\r\n    }\r\n    function setNow(info){\r\n        dispacth(updateCity(info))\r\n        toBack()\r\n    }\r\n    Anchors.push({key:'part-now',href:'#part-now',title:'#'})\r\n    Anchors.push({key:'part-hot',href:'#part-hot',title:'热'})\r\n    for(var i=0;i<26;i++){\r\n        let t = String.fromCharCode(65+i)\r\n        for(let b of areas){\r\n            if(citys[t]){\r\n                if(b.short[0].toUpperCase() == t){\r\n                    citys[t].push(b)\r\n                }\r\n            }else{\r\n                if(b.short[0].toUpperCase() == t){\r\n                    Anchors.push({key:'part-' + t,href:'#part-' + t,title:t})\r\n                    citys[t] = []\r\n                    citys[t].push(b)\r\n                }\r\n            }\r\n        }\r\n       \r\n        // citys[t] = []\r\n        // for(let b of areas){\r\n        //     if(b.short[0].toUpperCase() == t){\r\n        //         citys[t].push(b)\r\n        //     }\r\n        // }\r\n        // if(citys[t].length == 0){\r\n        //     delete citys[t]\r\n        //     Anchors.splice(Anchors.length-1,1)\r\n        // }\r\n    }\r\n\r\n    function showCar(){\r\n        let arr = []\r\n        arr.push(\r\n            <div key='now' id={'part-now'}>\r\n                <p>当前城市</p>\r\n                <div className={sassCity.cityItem}>{label}</div>\r\n            </div>\r\n        )\r\n        arr.push(\r\n            <div key='hot' id={'part-hot'}>\r\n                <p>热门城市</p>\r\n                {hots.map((item,index)=>{\r\n                    return <div onClick={setNow.bind(this,item)} key={index} className={sassCity.cityItem}>{item.label}</div>\r\n                })}\r\n                \r\n            </div>\r\n        )\r\n        for(let i in citys){\r\n            arr.push(\r\n            <div  key={i} id={'part-'+i}>\r\n                <p>{i}</p>\r\n                {citys[i].map((item,index)=>{\r\n                    return  <div onClick={setNow.bind(this,item)} key={index} className={sassCity.cityItem}>{item.label}</div>\r\n                })}\r\n            </div>)\r\n        }\r\n        return arr\r\n    }\r\n    const handleClick = (e, link) => {\r\n        e.preventDefault();\r\n    };\r\n    return (\r\n        <div>\r\n            <div className={sassCity.top}>\r\n                <LeftOutlined onClick={toBack}/>\r\n                <p>城市选择</p>\r\n                <div></div>\r\n            </div>\r\n            <div className={sassCity.info}>\r\n                <Row>\r\n                    <Col span={24}>\r\n                        {showCar()}\r\n                    </Col>\r\n                    <Col style={{position:'fixed',right:'10px'}}>\r\n                        <Anchor className={sassCity.after}\r\n                            getContainer={()=>document.querySelector('.'+sassCity.info)}\r\n                            affix={false}\r\n                            onClick={handleClick}\r\n                            items={Anchors}\r\n                        />\r\n                    </Col>\r\n                </Row>\r\n                </div>\r\n        </div>\r\n    )\r\n}"],"names":["getBanner","server","url","getGroups","getNews","getCitys","params","level","getHot","service","axios","baseURL","timeout","method","interceptors","request","use","token","window","localStorage","getItem","undefined","headers","error","console","log","Promise","reject","response","data","status","alert","description","City","props","_useSelector","useSelector","state","commodity","label","navigate","pinyin","short","value","useNavigate","dispacth","useDispatch","_React$useState","React","_React$useState2","_slicedToArray","areas","setAreas","_React$useState3","_React$useState4","hots","setHots","citys","Anchors","toBack","setNow","info","updateCity","useEffect","then","res","body","push","key","href","title","i","_step","t","String","fromCharCode","_iterator","_createForOfIteratorHelper","s","n","done","b","toUpperCase","err","e","f","_jsxs","children","className","sassCity","_jsx","LeftOutlined","onClick","Row","Col","span","_this","arr","id","map","item","index","bind","showCar","style","position","right","Anchor","getContainer","document","querySelector","affix","link","preventDefault","items"],"sourceRoot":""}